<div class="h-full user-select-none">
  <div cdkDropList (cdkDropListDropped)="onFileDrop($event)"
       class="file-list">
    @for (file of store.filesSignal(); track file; let index = $index) {
      @if (file.isVisible) {
        <div class="flex">

          <div
            cdkDrag
            [ngClass]="{'file-selected-bg': file.isSelected}"
            class="list-element-basics list-element-bg flex items-center w-full"
          >
            <div
              class="file-custom-placeholder router-bg-color material-box-shadow-inset"
              *cdkDragPlaceholder
            ></div>
            <div
              class="flex items-center w-full h-full"
              [ngClass]="{'tailwind-font-color-warning': file.internalWarning || file.externalWarning }"
            >
              <div
                (mousedown)="onMouseDown($event, file)"
                (mouseenter)="onMouseEnterFile(file)"
                (click)="onFileClick($event, file, index)"
                class="flex justify-end pl-2 pr-3 tailwind-font-color-light">
                @if (file.isSelected) {
                  <i class="material-symbols-outlined">check_box</i>
                } @else {
                  <i class="material-symbols-outlined">check_box_outline_blank</i>
                }
              </div>
              <div class="pl-2 pr-2 w-10 tailwind-font-color-light">
                {{ file.index + 1 }}.
              </div>
              <div
                cdkDragHandle
                class="cursor-grab pl-2 pr-2 w-10 tailwind-font-color-light">
                <i class="material-symbols-outlined">drag_indicator</i>
              </div>
              <div class="flex items-center w-8 pr-3">
                @if (file.externalWarning) {
                  <i class="material-symbols-outlined !text-lg">computer_cancel</i>
                }
                @else if (file.internalWarning) {
                  <i class="material-symbols-outlined !text-lg">warning</i>
                }
                @else if (file.changed) {
                  <i class="material-symbols-outlined !text-lg">settings</i>
                }
              </div>
              <div
                (mousedown)="onMouseDown($event, file)"
                (mouseenter)="onMouseEnterFile(file)"
                (click)="onFileClick($event, file, index)"
                class="flex items-center w-full h-full"
              >
                <div>
                  <div class="long-word-break" [innerHTML]="file.displayName"></div>
                </div>
              </div>
            </div>
          </div>

        </div>
      }
    }
  </div>
</div>
